# Finsights AI

**Finsights AI** — современная система для анализа и парсинга финансовых выписок (Kaspi, Halyk и др.), автоматической категоризации транзакций и прогнозирования с помощью ИИ. Вся авторизация — только через Google, оплата подписки — вручную через Kaspi Gold.

---

## Что нового (2024)

- **Google OAuth:**
  - Только вход через Google (passport.js), email/пароль полностью удалены.
  - Профиль пользователя (имя, email, аватар, Google ID) берётся из Google и не редактируется вручную.
- **Оплата через Kaspi Gold:**
  - Stripe полностью удалён.
  - Оплата подписки — ручной перевод на Kaspi Gold, с подтверждением оплаты.
- **Современный профиль:**
  - Крупный Google-аватар, имя, email, статус подписки, кнопка «Выйти».
  - Вкладки: Основное, Финансовое резюме, Настройки, Помощь.
  - Визуализация KPI, топ-доходы/расходы, график динамики.
  - Все бизнес-поля с плейсхолдерами и подсказками.
  - Кнопка «Сохранить» с индикатором успеха, подтверждение удаления профиля.
  - Возможность добавить/сменить бизнес-профиль.
- **Загрузка файла:**
  - Кнопка «Загрузить или заменить файл» открывает модальное окно, не сбрасывает дашборд.
  - Подтверждение замены, отображение выбранного файла, возможность отмены.
  - Drag&Drop и клик по области поддерживаются.
- **UX/UI:**
  - Современный дизайн, адаптивность, лаконичные карточки, разделители, иконки.
  - Минимальный сброс состояния, максимум визуализации.
  - Поддержка мобильных устройств.
- **Технические улучшения:**
  - Backend переведён на CommonJS.
  - Tailwind CSS через CDN.
  - Подробные console.log для дебага.

---

## Возможности
- Загрузка PDF/CSV/PNG/JPG выписок из разных банков
- Автоматический парсинг и категоризация транзакций
- Интеграция с OpenAI для прогнозирования и fallback-анализа
- Веб-интерфейс для просмотра и фильтрации данных
- Только Google OAuth (passport.js)
- Ручная оплата подписки через Kaspi Gold
- Современный профиль с Google-аватаром и вкладками
- Визуализация KPI, графики, топ-доходы/расходы

## Быстрый старт

1. Клонируйте репозиторий:
   ```sh
   git clone https://github.com/NIgan1989/finsights-ai.git
   cd finsights-ai
   ```
2. Установите зависимости:
   ```sh
   npm install
   ```
3. Создайте файл `.env` в папке `backend/` и добавьте свои ключи (см. пример ниже).
4. Запустите проект:
   ```sh
   npm run dev
   ```

## Пример .env (backend/.env)
```
OPENAI_API_KEY=your_openai_key_here
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
SESSION_SECRET=your_session_secret
```

## Структура проекта
- `backend/` — серверная логика, парсеры PDF, API, Google OAuth
- `services/` — сервисы для работы с данными
- `components/` — React-компоненты интерфейса
- `public/` — статические файлы

## TODO
- [ ] Парсер PDF для Halyk банка
- [ ] Улучшение парсера Kaspi
- [ ] Интеграция fallback через OpenAI Vision/LLM
- [ ] Проверка и доработка прогноза

---

**Внимание!** Не храните секретные ключи в репозитории. Используйте `.env` и добавляйте его в `.gitignore`.
